#!/usr/bin/make -f

%:
	dh $@

override_dh_auto_build:
	# No build step needed for Python scripts

override_dh_auto_install:
	# Install BT command files
	install -d debian/biostool/usr/share/biostool
	cp *.py debian/biostool/usr/share/biostool/ 2>/dev/null || true
	cp *.sh debian/biostool/usr/share/biostool/ 2>/dev/null || true
	cp *.txt debian/biostool/usr/share/biostool/ 2>/dev/null || true
	cp -r attach build cleanup config create remove detach init merge move fetch push select status use top worktrees debian/biostool/usr/share/biostool/ 2>/dev/null || true
	# Install GUI application
	install -d debian/biostool/usr/share/biostool/.gui
	cp .gui/* debian/biostool/usr/share/biostool/.gui/ 2>/dev/null || true
	# Install VS Code extension
	install -d debian/biostool/usr/share/biostool/.vscode-extension
	cp *.vsix debian/biostool/usr/share/biostool/.vscode-extension/ 2>/dev/null || true
	# Install executable wrappers
	install -d debian/biostool/usr/bin
	echo '#!/bin/bash' > debian/biostool/usr/bin/bt
	echo 'cd /usr/share/biostool && exec python3 bt.py "$$@"' >> debian/biostool/usr/bin/bt
	chmod 755 debian/biostool/usr/bin/bt
	echo '#!/bin/bash' > debian/biostool/usr/bin/btgui
	echo 'cd /usr/share/biostool/.gui && exec python3 btgui.py "$$@"' >> debian/biostool/usr/bin/btgui
	chmod 755 debian/biostool/usr/bin/btgui
	# Install documentation
	install -d debian/biostool/usr/share/doc/biostool
	cp README.md debian/biostool/usr/share/doc/biostool/ 2>/dev/null || true

override_dh_auto_clean:
	rm -rf debian/biostool
	find . -type d -name __pycache__ -exec rm -rf {} + 2>/dev/null || true
	find . -type f -name "*.pyc" -delete 2>/dev/null || true
